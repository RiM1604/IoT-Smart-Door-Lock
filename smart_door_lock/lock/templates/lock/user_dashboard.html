<script>
function sendLockRequest(action) {
    fetch(`/lock/${action}/`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": "{{ csrf_token }}"
        },
        body: JSON.stringify({})
    })
    .then(response => response.json())
    .then(data => {
        const messageElement = document.getElementById("statusMessage");
        if (data.error) {
            messageElement.textContent = data.error;
            messageElement.classList.add("error");
        } else {
            messageElement.textContent = data.message;
            messageElement.classList.remove("error");
        }
    })
    .catch(error => console.error("Error:", error));
}
</script>




<div class="dashboard-container">
    <h2>Welcome, {{ user.username }}</h2>
    
    <!-- Door control section -->
    <div class="control-section">
        <h3>Door Control</h3>
        <button onclick="sendLockRequest('unlock_door')">Unlock Door</button>
        <button onclick="sendLockRequest('lock_door')">Lock Door</button>
        <p id="statusMessage"></p>
    </div>
    
    <!-- Logout option -->
    <div class="logout-section">
        <a href="{% url 'account_logout' %}">Logout</a>
    </div>
</div>

